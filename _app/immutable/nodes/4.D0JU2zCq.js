import{f as Fe,c as He,a as Ge}from"../chunks/index.MXEzKdz7.js";import{h as ye,u as Oe}from"../chunks/await_block.CMdXeV2i.js";import{S as Je,i as Ke,n as R,e as v,t as j,o as Qe,d as f,p as L,c as k,k as Z,a as E,b as B,q as u,f as D,g as h,r as U,m as me,h as G,j as O,s as Y,u as Ee,v as ce,w as x,x as ee,y as ie,z as te,A as We,l as _e,B as le,C as Xe,D as Ye}from"../chunks/index.dv9gt0BC.js";import{s as Ze,h as $e,r as he,c as X,o as xe,j as Ie,k as W,n as $,l as De}from"../chunks/scheduler.BeHD8Juy.js";import{e as Ce,u as et,c as de,l as tt,a as Ve,n as lt,b as oe,s as Pe,F as se,f as st,d as rt,g as at,h as nt,p as it,i as ot,m as ct,t as ut,j as ft,k as dt,o as mt,q as _t}from"../chunks/mopidyTools.Ec-cZSvp.js";import{c as ht}from"../chunks/clickOutside.BxFJ2b6i.js";import{b as pt}from"../chunks/paths.DbxX0fyQ.js";import{P as Te}from"../chunks/public.BJpJhqVd.js";function Ae(a,e,t){const l=a.slice();return l[21]=e[t],l[23]=t,l}function Se(a){let e,t;function l(c,w){return c[9]?kt:vt}let s=l(a),r=s(a),n=a[7].track&&Ne(a);return{c(){e=v("div"),r.c(),t=R(),n&&n.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var w=E(e);r.l(w),t=L(w),n&&n.l(w),w.forEach(f),this.h()},h(){u(e,"class","card")},m(c,w){D(c,e,w),r.m(e,null),h(e,t),n&&n.m(e,null)},p(c,w){s===(s=l(c))&&r?r.p(c,w):(r.d(1),r=s(c),r&&(r.c(),r.m(e,t))),c[7].track?n?n.p(c,w):(n=Ne(c),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(c){c&&f(e),r.d(),n&&n.d()}}}function vt(a){let e,t=`<figure class="image is-1by1"><img src="${pt}/icon.svg" alt="Placeholder" width="240" height="240"/></figure>`;return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1lb8zzs"&&(e.innerHTML=t),this.h()},h(){u(e,"class","card-image has-text-centered")},m(l,s){D(l,e,s)},p:$,d(l){l&&f(e)}}}function kt(a){let e,t,l,s;return{c(){e=v("div"),t=v("figure"),l=v("img"),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=E(e);t=k(n,"FIGURE",{class:!0});var c=E(t);l=k(c,"IMG",{src:!0,width:!0,height:!0,alt:!0}),c.forEach(f),n.forEach(f),this.h()},h(){De(l.src,s=a[9])||u(l,"src",s),u(l,"width","240"),u(l,"height","240"),u(l,"alt","Album"),u(t,"class","image"),u(e,"class","card-image has-text-centered")},m(r,n){D(r,e,n),h(e,t),h(t,l)},p(r,n){n&512&&!De(l.src,s=r[9])&&u(l,"src",s)},d(r){r&&f(e)}}}function Ne(a){let e,t,l,s,r=a[7].track.name+"",n,c,w,_=a[7].track.artists&&Me(a),d=a[1]&&a[0]&&qe(a);return{c(){e=v("div"),t=v("div"),l=v("div"),s=v("p"),n=j(r),c=R(),_&&_.c(),w=R(),d&&d.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var p=E(e);t=k(p,"DIV",{class:!0});var I=E(t);l=k(I,"DIV",{class:!0});var N=E(l);s=k(N,"P",{class:!0});var V=E(s);n=B(V,r),V.forEach(f),c=L(N),_&&_.l(N),N.forEach(f),I.forEach(f),w=L(p),d&&d.l(p),p.forEach(f),this.h()},h(){u(s,"class","title is-4"),u(l,"class","media-content"),u(t,"class","media"),u(e,"class","card-content")},m(m,p){D(m,e,p),h(e,t),h(t,l),h(l,s),h(s,n),h(l,c),_&&_.m(l,null),h(e,w),d&&d.m(e,null)},p(m,p){p&128&&r!==(r=m[7].track.name+"")&&Y(n,r),m[7].track.artists?_?_.p(m,p):(_=Me(m),_.c(),_.m(l,null)):_&&(_.d(1),_=null),m[1]&&m[0]?d?d.p(m,p):(d=qe(m),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(m){m&&f(e),_&&_.d(),d&&d.d()}}}function Me(a){let e,t=a[7].track.artists[0].name+"",l;return{c(){e=v("p"),l=j(t),this.h()},l(s){e=k(s,"P",{class:!0});var r=E(e);l=B(r,t),r.forEach(f),this.h()},h(){u(e,"class","subtitle is-6")},m(s,r){D(s,e,r),h(e,l)},p(s,r){r&128&&t!==(t=s[7].track.artists[0].name+"")&&Y(l,t)},d(s){s&&f(e)}}}function qe(a){let e,t,l,s=oe(a[1])+"",r,n,c,w,_,d,m,p,I=oe(a[0])+"",N,V,z;return{c(){e=v("div"),t=v("div"),l=v("div"),r=j(s),n=j(" "),c=R(),w=v("div"),_=v("input"),d=R(),m=v("div"),p=j(" "),N=j(I),this.h()},l(C){e=k(C,"DIV",{class:!0});var g=E(e);t=k(g,"DIV",{class:!0});var P=E(t);l=k(P,"DIV",{class:!0});var F=E(l);r=B(F,s),n=B(F," "),F.forEach(f),c=L(P),w=k(P,"DIV",{class:!0});var y=E(w);_=k(y,"INPUT",{type:!0,min:!0,max:!0,class:!0}),y.forEach(f),d=L(P),m=k(P,"DIV",{class:!0});var i=E(m);p=B(i," "),N=B(i,I),i.forEach(f),P.forEach(f),g.forEach(f),this.h()},h(){u(l,"class","column is-narrow"),u(_,"type","range"),u(_,"min","0"),u(_,"max","100"),u(_,"class","slider svelte-1iz48mk"),u(w,"class","column"),u(m,"class","column is-narrow"),u(t,"class","columns is-mobile is-gapless"),u(e,"class","content")},m(C,g){D(C,e,g),h(e,t),h(t,l),h(l,r),h(l,n),h(t,c),h(t,w),h(w,_),Ee(_,a[6]),h(t,d),h(t,m),h(m,p),h(m,N),V||(z=[U(_,"change",a[15]),U(_,"input",a[15]),U(_,"change",function(){W(Pe(a[6]))&&Pe(a[6]).apply(this,arguments)})],V=!0)},p(C,g){a=C,g&2&&s!==(s=oe(a[1])+"")&&Y(r,s),g&64&&Ee(_,a[6]),g&1&&I!==(I=oe(a[0])+"")&&Y(N,I)},d(C){C&&f(e),V=!1,he(z)}}}function ze(a){let e;function t(r,n){return r[5]?wt:r[8]&&r[8]._webSocket.readyState==1?bt:gt}let l=t(a),s=l(a);return{c(){s.c(),e=ce()},l(r){s.l(r),e=ce()},m(r,n){s.m(r,n),D(r,e,n)},p(r,n){l===(l=t(r))&&s?s.p(r,n):(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&f(e),s.d(r)}}}function gt(a){let e,t="not connected to mopidy";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=k(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-dd5m6w"&&(e.textContent=t),this.h()},h(){u(e,"class","list-item")},m(l,s){D(l,e,s)},p:$,d(l){l&&f(e)}}}function bt(a){let e,t="loading songs...";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=k(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-rsxaxd"&&(e.textContent=t),this.h()},h(){u(e,"class","list-item")},m(l,s){D(l,e,s)},p:$,d(l){l&&f(e)}}}function wt(a){let e,t,l={ctx:a,current:null,token:null,hasCatch:!0,pending:It,then:Et,catch:yt,error:24};return ye(t=a[5],l),{c(){e=ce(),l.block.c()},l(s){e=ce(),l.block.l(s)},m(s,r){D(s,e,r),l.block.m(s,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e},p(s,r){a=s,l.ctx=a,r&32&&t!==(t=a[5])&&ye(t,l)||Oe(l,a,r)},d(s){s&&f(e),l.block.d(s),l.token=null,l=null}}}function yt(a){let e,t=a[24].message+"",l,s;return{c(){e=v("p"),l=j(t),s=R(),this.h()},l(r){e=k(r,"P",{class:!0,style:!0});var n=E(e);l=B(n,t),n.forEach(f),s=L(r),this.h()},h(){u(e,"class","list-item"),Ye(e,"color","red")},m(r,n){D(r,e,n),h(e,l),D(r,s,n)},p(r,n){n&32&&t!==(t=r[24].message+"")&&Y(l,t)},d(r){r&&(f(e),f(s))}}}function Et(a){let e,t="no tracks playing",l;return{c(){e=v("p"),e.textContent=t,l=R(),this.h()},l(s){e=k(s,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1lhd5re"&&(e.textContent=t),l=L(s),this.h()},h(){u(e,"class","list-item")},m(s,r){D(s,e,r),D(s,l,r)},p:$,d(s){s&&(f(e),f(l))}}}function It(a){let e,t="loading songs...",l;return{c(){e=v("p"),e.textContent=t,l=R(),this.h()},l(s){e=k(s,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-rsxaxd"&&(e.textContent=t),l=L(s),this.h()},h(){u(e,"class","list-item")},m(s,r){D(s,e,r),D(s,l,r)},p:$,d(s){s&&(f(e),f(l))}}}function Re(a){let e,t,l;return t=new se({props:{icon:ot,spin:a[10]=="playing",class:"icon is-small"}}),{c(){e=j(" "),x(t.$$.fragment)},l(s){e=B(s," "),ee(t.$$.fragment,s)},m(s,r){D(s,e,r),te(t,s,r),l=!0},p(s,r){const n={};r&1024&&(n.spin=s[10]=="playing"),t.$set(n)},i(s){l||(G(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&f(e),le(t,s)}}}function Dt(a){let e,t;return e=new se({props:{icon:mt,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){te(e,l,s),t=!0},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}function Ct(a){let e,t;return e=new se({props:{icon:_t,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){te(e,l,s),t=!0},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}function Le(a,e){let t,l,s,r=e[21].track.name+"",n,c,w,_,d,m,p,I,N,V,z,C,g,P,F,y,i,b,o,T,q=$,M,K,pe,A=e[23]===e[7].index&&Re(e);const ve=[Ct,Dt],Q=[];function ke(S,H){return S[4]==S[21].tlid?0:1}p=ke(e),I=Q[p]=ve[p](e),g=new se({props:{icon:st,class:"icon is-small"}}),i=new se({props:{icon:rt,class:"icon is-small"}});function Ue(...S){return e[16](e[23],...S)}function je(...S){return e[17](e[23],...S)}function Be(){return e[18](e[23])}return{key:a,first:null,c(){t=v("a"),l=v("div"),s=v("div"),n=j(r),c=R(),A&&A.c(),w=R(),_=v("div"),d=v("div"),m=v("div"),I.c(),N=R(),V=v("div"),z=v("div"),C=v("a"),x(g.$$.fragment),P=j(` 
                  Play`),F=R(),y=v("a"),x(i.$$.fragment),b=j(` 
                  Remove track`),o=R(),this.h()},l(S){t=k(S,"A",{class:!0,href:!0,draggable:!0,ondragover:!0});var H=E(t);l=k(H,"DIV",{class:!0});var J=E(l);s=k(J,"DIV",{class:!0,role:!0,tabindex:!0});var re=E(s);n=B(re,r),c=L(re),A&&A.l(re),re.forEach(f),w=L(J),_=k(J,"DIV",{class:!0});var ge=E(_);d=k(ge,"DIV",{class:!0});var ae=E(d);m=k(ae,"DIV",{class:!0,role:!0,tabindex:!0});var be=E(m);I.l(be),be.forEach(f),N=L(ae),V=k(ae,"DIV",{class:!0,id:!0,role:!0});var we=E(V);z=k(we,"DIV",{class:!0});var ne=E(z);C=k(ne,"A",{href:!0,class:!0});var ue=E(C);ee(g.$$.fragment,ue),P=B(ue,` 
                  Play`),ue.forEach(f),F=L(ne),y=k(ne,"A",{href:!0,class:!0});var fe=E(y);ee(i.$$.fragment,fe),b=B(fe,` 
                  Remove track`),fe.forEach(f),ne.forEach(f),we.forEach(f),ae.forEach(f),ge.forEach(f),J.forEach(f),o=L(H),H.forEach(f),this.h()},h(){u(s,"class","column"),u(s,"role","button"),u(s,"tabindex","0"),u(m,"class","dropdown-trigger"),u(m,"role","button"),u(m,"tabindex","0"),u(C,"href",null),u(C,"class","dropdown-item"),u(y,"href",null),u(y,"class","dropdown-item"),u(z,"class","dropdown-content"),u(V,"class","dropdown-menu"),u(V,"id","dropdown-menu"),u(V,"role","menu"),u(d,"class","dropdown is-right is-up"),ie(d,"is-active",e[4]==e[21].tlid),u(_,"class","column is-narrow"),u(l,"class","columns is-mobile"),u(t,"class","list-item"),u(t,"href",null),u(t,"draggable",!0),u(t,"ondragover","return false"),ie(t,"is-active",e[3]===e[23]),this.first=t},m(S,H){D(S,t,H),h(t,l),h(l,s),h(s,n),h(s,c),A&&A.m(s,null),h(l,w),h(l,_),h(_,d),h(d,m),Q[p].m(m,null),h(d,N),h(d,V),h(V,z),h(z,C),te(g,C,null),h(C,P),h(z,F),h(z,y),te(i,y,null),h(y,b),h(t,o),M=!0,K||(pe=[U(s,"click",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),U(s,"keypress",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),U(m,"click",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),U(m,"keypress",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),U(C,"click",function(){W(e[11](e[21]))&&e[11](e[21]).apply(this,arguments)}),U(y,"click",function(){W(e[12](e[21]))&&e[12](e[21]).apply(this,arguments)}),U(t,"dragstart",Ue),U(t,"drop",We(je)),U(t,"dragenter",Be)],K=!0)},p(S,H){e=S,(!M||H&4)&&r!==(r=e[21].track.name+"")&&Y(n,r),e[23]===e[7].index?A?(A.p(e,H),H&132&&G(A,1)):(A=Re(e),A.c(),G(A,1),A.m(s,null)):A&&(_e(),O(A,1,1,()=>{A=null}),me());let J=p;p=ke(e),p!==J&&(_e(),O(Q[J],1,1,()=>{Q[J]=null}),me(),I=Q[p],I||(I=Q[p]=ve[p](e),I.c()),G(I,1),I.m(m,null)),(!M||H&20)&&ie(d,"is-active",e[4]==e[21].tlid),(!M||H&12)&&ie(t,"is-active",e[3]===e[23])},r(){T=t.getBoundingClientRect()},f(){Fe(t),q()},a(){q(),q=He(t,T,Ge,{duration:300})},i(S){M||(G(A),G(I),G(g.$$.fragment,S),G(i.$$.fragment,S),M=!0)},o(S){O(A),O(I),O(g.$$.fragment,S),O(i.$$.fragment,S),M=!1},d(S){S&&f(t),A&&A.d(),Q[p].d(),le(g),le(i),K=!1,he(pe)}}}function Vt(a){let e,t,l="Now playing",s,r,n,c=[],w=new Map,_,d,m,p,I,N,V,z,C,g=a[7]&&Se(a),P=Ce(a[2]);const F=i=>i[21].tlid;for(let i=0;i<P.length;i+=1){let b=Ae(a,P,i),o=F(b);w.set(o,c[i]=Le(o,b))}let y=null;return P.length||(y=ze(a)),{c(){e=R(),t=v("h1"),t.textContent=l,s=R(),g&&g.c(),r=R(),n=v("div");for(let i=0;i<c.length;i+=1)c[i].c();y&&y.c(),_=R(),d=v("div"),m=v("div"),p=v("a"),I=j("Version - "),N=j(Te),this.h()},l(i){Qe("svelte-1546q17",document.head).forEach(f),e=L(i),t=k(i,"H1",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-5oxt49"&&(t.textContent=l),s=L(i),g&&g.l(i),r=L(i),n=k(i,"DIV",{class:!0});var o=E(n);for(let K=0;K<c.length;K+=1)c[K].l(o);y&&y.l(o),o.forEach(f),_=L(i),d=k(i,"DIV",{class:!0});var T=E(d);m=k(T,"DIV",{class:!0});var q=E(m);p=k(q,"A",{href:!0});var M=E(p);I=B(M,"Version - "),N=B(M,Te),M.forEach(f),q.forEach(f),T.forEach(f),this.h()},h(){document.title="Now Playing",u(t,"class","title"),u(n,"class","list is-hoverable"),u(p,"href","https://github.com/cristianpb/muse"),u(m,"class","column has-text-centered"),u(d,"class","columns")},m(i,b){D(i,e,b),D(i,t,b),D(i,s,b),g&&g.m(i,b),D(i,r,b),D(i,n,b);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(n,null);y&&y.m(n,null),D(i,_,b),D(i,d,b),h(d,m),h(m,p),h(p,I),h(p,N),V=!0,z||(C=[$e(ht.call(null,n)),U(n,"click_outside",a[19])],z=!0)},p(i,[b]){if(i[7]?g?g.p(i,b):(g=Se(i),g.c(),g.m(r.parentNode,r)):g&&(g.d(1),g=null),b&32188){P=Ce(i[2]),_e();for(let o=0;o<c.length;o+=1)c[o].r();c=et(c,b,F,1,i,P,w,n,at,Le,null,Ae);for(let o=0;o<c.length;o+=1)c[o].a();me(),!P.length&&y?y.p(i,b):P.length?y&&(y.d(1),y=null):(y=ze(i),y.c(),y.m(n,null))}},i(i){if(!V){for(let b=0;b<P.length;b+=1)G(c[b]);V=!0}},o(i){for(let b=0;b<c.length;b+=1)O(c[b]);V=!1},d(i){i&&(f(e),f(t),f(s),f(r),f(n),f(_),f(d)),g&&g.d(i);for(let b=0;b<c.length;b+=1)c[b].d();y&&y.d(),z=!1,he(C)}}}function Pt(a,e){a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move";const t=e;a.dataTransfer.setData("text/plain",t)}function Tt(a,e,t){let l,s,r,n,c,w,_;X(a,de,o=>t(7,s=o)),X(a,ct,o=>t(8,r=o)),X(a,Ve,o=>t(9,n=o)),X(a,ut,o=>t(0,c=o)),X(a,ft,o=>t(1,w=o)),X(a,dt,o=>t(10,_=o));let d=[],m=!1,p,I;xe(()=>{t(5,I=N())}),de.subscribe(async o=>{o&&o.track&&Ie(Ve,n=await tt(o.track),n)});const N=async()=>{t(2,d=await nt())},V=o=>{it(o),t(4,p=null)},z=async o=>{const T=await r.tracklist.remove({criteria:{uri:[o.track.uri]}});t(4,p=null),T.length>0&&t(2,d=d.filter(q=>q.track.uri!=T[0].track.uri))};function C(o,T){o.dataTransfer.dropEffect="move";const q=parseInt(o.dataTransfer.getData("text/plain")),M=d;q<T?(M.splice(T+1,0,M[q]),M.splice(q,1),r.tracklist.move({start:q,end:q+1,to_position:T})):(M.splice(T,0,M[q]),M.splice(q+1,1),r.tracklist.move({start:T,end:q,to_position:T+1})),t(2,d=M),q===s.index&&Ie(de,s.index=T,s),t(3,m=null)}const g=o=>{p===o?t(4,p=null):t(4,p=o)};function P(){l=Xe(this.value),t(6,l),t(1,w),t(0,c)}const F=(o,T)=>Pt(T,o),y=(o,T)=>C(T,o),i=o=>t(3,m=o),b=()=>t(4,p=null);return a.$$.update=()=>{a.$$.dirty&3&&t(6,l=lt(w,c))},[c,w,d,m,p,I,l,s,r,n,_,V,z,C,g,P,F,y,i,b]}class Ut extends Je{constructor(e){super(),Ke(this,e,Tt,Vt,Ze,{})}}export{Ut as component};
