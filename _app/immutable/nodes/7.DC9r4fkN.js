import{s as He,r as be,c as Re,n as Y,h as Je,o as Ke,j as Xe,k as ke}from"../chunks/scheduler.BeHD8Juy.js";import{S as je,i as Fe,e as p,n as O,w as z,c as k,a as b,d as f,p as S,k as ie,x as Q,q as c,y as me,f as I,g as d,z as G,u as Te,r as q,h as E,l as ce,j as T,m as ue,B as W,v as Z,t as H,b as R,s as fe,D as Ye,E as Ze}from"../chunks/index.dv9gt0BC.js";import{h as oe,u as ge}from"../chunks/await_block.CMdXeV2i.js";import{F as X,N as xe,m as et,E as ze,O as Qe,P as ve,Q as tt,R as lt,e as Ie,S as Ve,f as st,r as at,T as nt,U as Ae,V as Ne,W as Me,o as rt,q as ot}from"../chunks/mopidyTools.Ec-cZSvp.js";import{c as it}from"../chunks/clickOutside.BxFJ2b6i.js";import{b as Le}from"../chunks/paths.DbxX0fyQ.js";function Oe(r){let e,t,s,l={ctx:r,current:null,token:null,hasCatch:!0,pending:mt,then:ut,catch:ct,value:11,error:12,blocks:[,,,]};return oe(t=r[2],l),{c(){e=Z(),l.block.c()},l(a){e=Z(),l.block.l(a)},m(a,n){I(a,e,n),l.block.m(a,l.anchor=n),l.mount=()=>e.parentNode,l.anchor=e,s=!0},p(a,n){r=a,l.ctx=r,n&4&&t!==(t=r[2])&&oe(t,l)||ge(l,r,n)},i(a){s||(E(l.block),s=!0)},o(a){for(let n=0;n<3;n+=1){const i=l.blocks[n];T(i)}s=!1},d(a){a&&f(e),l.block.d(a),l.token=null,l=null}}}function ct(r){let e=r[12].message+"",t;return{c(){t=H(e)},l(s){t=R(s,e)},m(s,l){I(s,t,l)},p(s,l){l&4&&e!==(e=s[12].message+"")&&fe(t,e)},i:Y,o:Y,d(s){s&&f(t)}}}function ut(r){let e,t,s,l;const a=[dt,ft],n=[];function i(o,u){return o[11]?0:1}return e=i(r),t=n[e]=a[e](r),{c(){t.c(),s=Z()},l(o){t.l(o),s=Z()},m(o,u){n[e].m(o,u),I(o,s,u),l=!0},p(o,u){let y=e;e=i(o),e!==y&&(ce(),T(n[y],1,1,()=>{n[y]=null}),ue(),t=n[e],t||(t=n[e]=a[e](o),t.c()),E(t,1),t.m(s.parentNode,s))},i(o){l||(E(t),l=!0)},o(o){T(t),l=!1},d(o){o&&f(s),n[e].d(o)}}}function ft(r){let e;return{c(){e=H("Error")},l(t){e=R(t,"Error")},m(t,s){I(t,e,s)},i:Y,o:Y,d(t){t&&f(e)}}}function dt(r){let e,t,s;return t=new X({props:{icon:tt,class:"icon"}}),{c(){e=p("button"),z(t.$$.fragment),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=b(e);Q(t.$$.fragment,a),a.forEach(f),this.h()},h(){c(e,"class","button svelte-k00xud")},m(l,a){I(l,e,a),G(t,e,null),s=!0},i(l){s||(E(t.$$.fragment,l),s=!0)},o(l){T(t.$$.fragment,l),s=!1},d(l){l&&f(e),W(t)}}}function mt(r){let e,t,s;return t=new X({props:{icon:ze,spin:!0,class:"icon"}}),{c(){e=p("button"),z(t.$$.fragment),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=b(e);Q(t.$$.fragment,a),a.forEach(f),this.h()},h(){c(e,"class","button svelte-k00xud")},m(l,a){I(l,e,a),G(t,e,null),s=!0},p:Y,i(l){s||(E(t.$$.fragment,l),s=!0)},o(l){T(t.$$.fragment,l),s=!1},d(l){l&&f(e),W(t)}}}function _t(r){let e,t,s,l,a,n,i="Create playlist",o,u,y,C,g,h,D="Name",_,m,$,w,V,B="Save changes",x,ee,M,U,te,ae;y=new X({props:{icon:xe,class:"icon"}});let v=r[2]&&Oe(r);return{c(){e=p("div"),t=p("div"),s=O(),l=p("div"),a=p("header"),n=p("p"),n.textContent=i,o=O(),u=p("a"),z(y.$$.fragment),C=O(),g=p("section"),h=p("label"),h.textContent=D,_=O(),m=p("input"),$=O(),w=p("footer"),V=p("button"),V.textContent=B,x=O(),v&&v.c(),ee=O(),M=p("button"),this.h()},l(P){e=k(P,"DIV",{class:!0});var L=b(e);t=k(L,"DIV",{class:!0,role:!0,tabindex:!0}),b(t).forEach(f),s=S(L),l=k(L,"DIV",{class:!0});var J=b(l);a=k(J,"HEADER",{class:!0});var j=b(a);n=k(j,"P",{class:!0,"data-svelte-h":!0}),ie(n)!=="svelte-1xgpgyu"&&(n.textContent=i),o=S(j),u=k(j,"A",{href:!0,"aria-label":!0});var ne=b(u);Q(y.$$.fragment,ne),ne.forEach(f),j.forEach(f),C=S(J),g=k(J,"SECTION",{class:!0});var le=b(g);h=k(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ie(h)!=="svelte-oqkyyj"&&(h.textContent=D),_=S(le),m=k(le,"INPUT",{class:!0,type:!0,name:!0,id:!0}),le.forEach(f),$=S(J),w=k(J,"FOOTER",{class:!0});var A=b(w);V=k(A,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(V)!=="svelte-pvxswh"&&(V.textContent=B),x=S(A),v&&v.l(A),A.forEach(f),J.forEach(f),ee=S(L),M=k(L,"BUTTON",{class:!0,"aria-label":!0}),b(M).forEach(f),L.forEach(f),this.h()},h(){c(t,"class","modal-background svelte-k00xud"),c(t,"role","button"),c(t,"tabindex","0"),c(n,"class","modal-card-title svelte-k00xud"),c(u,"href",null),c(u,"aria-label","close"),c(a,"class","modal-card-head svelte-k00xud"),c(h,"class","label"),c(h,"for","playlist name"),c(m,"class","input svelte-k00xud"),c(m,"type","text"),c(m,"name","playlist name"),c(m,"id","playlist name"),c(g,"class","modal-card-body svelte-k00xud"),c(V,"class","button is-success svelte-k00xud"),c(w,"class","modal-card-foot svelte-k00xud"),c(l,"class","modal-card svelte-k00xud"),c(M,"class","modal-close is-large svelte-k00xud"),c(M,"aria-label","close"),c(e,"class","modal svelte-k00xud"),me(e,"is-active",r[0])},m(P,L){I(P,e,L),d(e,t),d(e,s),d(e,l),d(l,a),d(a,n),d(a,o),d(a,u),G(y,u,null),d(l,C),d(l,g),d(g,h),d(g,_),d(g,m),Te(m,r[1]),d(l,$),d(l,w),d(w,V),d(w,x),v&&v.m(w,null),d(e,ee),d(e,M),U=!0,te||(ae=[q(t,"click",r[4]),q(t,"keypress",r[5]),q(u,"click",r[6]),q(m,"input",r[7]),q(V,"click",r[3]),q(M,"click",r[8])],te=!0)},p(P,[L]){L&2&&m.value!==P[1]&&Te(m,P[1]),P[2]?v?(v.p(P,L),L&4&&E(v,1)):(v=Oe(P),v.c(),E(v,1),v.m(w,null)):v&&(ce(),T(v,1,1,()=>{v=null}),ue()),(!U||L&1)&&me(e,"is-active",P[0])},i(P){U||(E(y.$$.fragment,P),E(v),U=!0)},o(P){T(y.$$.fragment,P),T(v),U=!1},d(P){P&&f(e),W(y),v&&v.d(),te=!1,be(ae)}}}function ht(r,e,t){let s;Re(r,et,D=>t(9,s=D));let l="",a,{showCreatePlaylistModal:n}=e;const i=async()=>await s.playlists.create({name:l})?(setTimeout(async()=>{const _=await Qe();ve.set(_),t(0,n=!n)},500),!0):!1,o=()=>{t(2,a=i())},u=()=>t(0,n=!n),y=()=>t(0,n=!n),C=()=>t(0,n=!n);function g(){l=this.value,t(1,l)}const h=()=>t(0,n=!n);return r.$$set=D=>{"showCreatePlaylistModal"in D&&t(0,n=D.showCreatePlaylistModal)},[n,l,a,o,u,y,C,g,h]}class pt extends je{constructor(e){super(),Fe(this,e,ht,_t,He,{showCreatePlaylistModal:0})}}function Se(r,e,t){const s=r.slice();return s[11]=e[t],s[13]=t,s}function Be(r){let e,t,s,l={ctx:r,current:null,token:null,hasCatch:!0,pending:Et,then:vt,catch:kt,value:10,error:15,blocks:[,,,]};return oe(t=r[0],l),{c(){e=Z(),l.block.c()},l(a){e=Z(),l.block.l(a)},m(a,n){I(a,e,n),l.block.m(a,l.anchor=n),l.mount=()=>e.parentNode,l.anchor=e,s=!0},p(a,n){r=a,l.ctx=r,n&1&&t!==(t=r[0])&&oe(t,l)||ge(l,r,n)},i(a){s||(E(l.block),s=!0)},o(a){for(let n=0;n<3;n+=1){const i=l.blocks[n];T(i)}s=!1},d(a){a&&f(e),l.block.d(a),l.token=null,l=null}}}function kt(r){let e,t=r[15].message+"",s;return{c(){e=p("p"),s=H(t),this.h()},l(l){e=k(l,"P",{class:!0,style:!0});var a=b(e);s=R(a,t),a.forEach(f),this.h()},h(){c(e,"class","list-item"),Ye(e,"color","red")},m(l,a){I(l,e,a),d(e,s)},p(l,a){a&1&&t!==(t=l[15].message+"")&&fe(s,t)},i:Y,o:Y,d(l){l&&f(e)}}}function vt(r){let e,t,s=Ie(r[3]),l=[];for(let i=0;i<s.length;i+=1)l[i]=qe(Se(r,s,i));const a=i=>T(l[i],1,1,()=>{l[i]=null});let n=null;return s.length||(n=Ue()),{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Z(),n&&n.c()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=Z(),n&&n.l(i)},m(i,o){for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(i,o);I(i,e,o),n&&n.m(i,o),t=!0},p(i,o){if(o&26){s=Ie(i[3]);let u;for(u=0;u<s.length;u+=1){const y=Se(i,s,u);l[u]?(l[u].p(y,o),E(l[u],1)):(l[u]=qe(y),l[u].c(),E(l[u],1),l[u].m(e.parentNode,e))}for(ce(),u=s.length;u<l.length;u+=1)a(u);ue(),!s.length&&n?n.p(i,o):s.length?n&&(n.d(1),n=null):(n=Ue(),n.c(),n.m(e.parentNode,e))}},i(i){if(!t){for(let o=0;o<s.length;o+=1)E(l[o]);t=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)T(l[o]);t=!1},d(i){i&&f(e),Ze(l,i),n&&n.d(i)}}}function Ue(r){let e,t="<p>loading</p> ";return{c(){e=p("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-11xvr7o"&&(e.innerHTML=t),this.h()},h(){c(e,"class","list-item")},m(s,l){I(s,e,l)},p:Y,d(s){s&&f(e)}}}function bt(r){let e=r[15].message+"",t;return{c(){t=H(e)},l(s){t=R(s,e)},m(s,l){I(s,t,l)},p(s,l){l&8&&e!==(e=s[15].message+"")&&fe(t,e)},d(s){s&&f(t)}}}function gt(r){let e,t=(r[14].tracks?r[14].tracks.length:"0")+"",s,l;return{c(){e=H("("),s=H(t),l=H(")")},l(a){e=R(a,"("),s=R(a,t),l=R(a,")")},m(a,n){I(a,e,n),I(a,s,n),I(a,l,n)},p(a,n){n&8&&t!==(t=(a[14].tracks?a[14].tracks.length:"0")+"")&&fe(s,t)},d(a){a&&(f(e),f(s),f(l))}}}function $t(r){let e;return{c(){e=H("loading..")},l(t){e=R(t,"loading..")},m(t,s){I(t,e,s)},p:Y,d(t){t&&f(e)}}}function yt(r){let e,t;return e=new X({props:{icon:rt,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){z(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,l){G(e,s,l),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function wt(r){let e,t;return e=new X({props:{icon:ot,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){z(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,l){G(e,s,l),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function qe(r){let e,t,s,l=r[11].name+"",a,n,i,o,u,y,C,g,h,D,_,m,$,w,V,B,x,ee,M,U,te,ae,v,P,L,J,j,ne,le,A={ctx:r,current:null,token:null,hasCatch:!0,pending:$t,then:gt,catch:bt,value:14,error:15};oe(u=Ve(r[11].uri),A);const $e=[wt,yt],se=[];function ye(N,F){return N[1]==N[13]?0:1}D=ye(r),_=se[D]=$e[D](r);function Ge(){return r[6](r[13])}function We(){return r[7](r[13])}return B=new X({props:{icon:st,class:"icon is-small"}}),U=new X({props:{icon:at,class:"icon is-small"}}),P=new X({props:{icon:nt,class:"icon is-small"}}),{c(){e=p("div"),t=p("div"),s=p("a"),a=H(l),i=O(),o=p("div"),A.block.c(),y=O(),C=p("div"),g=p("div"),h=p("div"),_.c(),m=O(),$=p("div"),w=p("div"),V=p("a"),z(B.$$.fragment),x=H(` 
                        Play`),ee=O(),M=p("a"),z(U.$$.fragment),te=H(` 
                        Shuffle`),ae=O(),v=p("a"),z(P.$$.fragment),L=H(` 
                        Add to queue`),J=O(),this.h()},l(N){e=k(N,"DIV",{class:!0});var F=b(e);t=k(F,"DIV",{class:!0});var K=b(t);s=k(K,"A",{class:!0,href:!0});var we=b(s);a=R(we,l),we.forEach(f),i=S(K),o=k(K,"DIV",{class:!0});var Ee=b(o);A.block.l(Ee),Ee.forEach(f),y=S(K),C=k(K,"DIV",{class:!0});var Ce=b(C);g=k(Ce,"DIV",{class:!0});var de=b(g);h=k(de,"DIV",{class:!0,role:!0,tabindex:!0});var Pe=b(h);_.l(Pe),Pe.forEach(f),m=S(de),$=k(de,"DIV",{class:!0,id:!0,role:!0});var De=b($);w=k(De,"DIV",{class:!0});var re=b(w);V=k(re,"A",{href:!0,class:!0});var _e=b(V);Q(B.$$.fragment,_e),x=R(_e,` 
                        Play`),_e.forEach(f),ee=S(re),M=k(re,"A",{href:!0,class:!0});var he=b(M);Q(U.$$.fragment,he),te=R(he,` 
                        Shuffle`),he.forEach(f),ae=S(re),v=k(re,"A",{href:!0,class:!0});var pe=b(v);Q(P.$$.fragment,pe),L=R(pe,` 
                        Add to queue`),pe.forEach(f),re.forEach(f),De.forEach(f),de.forEach(f),Ce.forEach(f),K.forEach(f),J=S(F),F.forEach(f),this.h()},h(){c(s,"class","column"),c(s,"href",n=Le+"/playlists/"+r[11].slug),c(o,"class","column is-narrow"),c(h,"class","dropdown-trigger"),c(h,"role","button"),c(h,"tabindex","0"),c(V,"href",null),c(V,"class","dropdown-item"),c(M,"href",null),c(M,"class","dropdown-item"),c(v,"href",null),c(v,"class","dropdown-item"),c(w,"class","dropdown-content"),c($,"class","dropdown-menu"),c($,"id","dropdown-menu"),c($,"role","menu"),c(g,"class","dropdown is-right is-up"),me(g,"is-active",r[1]==r[13]),c(C,"class","column is-narrow"),c(t,"class","columns is-mobile"),c(e,"class","list-item")},m(N,F){I(N,e,F),d(e,t),d(t,s),d(s,a),d(t,i),d(t,o),A.block.m(o,A.anchor=null),A.mount=()=>o,A.anchor=null,d(t,y),d(t,C),d(C,g),d(g,h),se[D].m(h,null),d(g,m),d(g,$),d($,w),d(w,V),G(B,V,null),d(V,x),d(w,ee),d(w,M),G(U,M,null),d(M,te),d(w,ae),d(w,v),G(P,v,null),d(v,L),d(e,J),j=!0,ne||(le=[q(h,"click",Ge),q(h,"keypress",We),q(V,"click",function(){ke(Ae(r[11].uri))&&Ae(r[11].uri).apply(this,arguments)}),q(M,"click",function(){ke(Ne(r[11].uri))&&Ne(r[11].uri).apply(this,arguments)}),q(v,"click",function(){ke(Me(r[11].uri))&&Me(r[11].uri).apply(this,arguments)})],ne=!0)},p(N,F){r=N,(!j||F&8)&&l!==(l=r[11].name+"")&&fe(a,l),(!j||F&8&&n!==(n=Le+"/playlists/"+r[11].slug))&&c(s,"href",n),A.ctx=r,F&8&&u!==(u=Ve(r[11].uri))&&oe(u,A)||ge(A,r,F);let K=D;D=ye(r),D!==K&&(ce(),T(se[K],1,1,()=>{se[K]=null}),ue(),_=se[D],_||(_=se[D]=$e[D](r),_.c()),E(_,1),_.m(h,null)),(!j||F&2)&&me(g,"is-active",r[1]==r[13])},i(N){j||(E(_),E(B.$$.fragment,N),E(U.$$.fragment,N),E(P.$$.fragment,N),j=!0)},o(N){T(_),T(B.$$.fragment,N),T(U.$$.fragment,N),T(P.$$.fragment,N),j=!1},d(N){N&&f(e),A.block.d(),A.token=null,A=null,se[D].d(),W(B),W(U),W(P),ne=!1,be(le)}}}function Et(r){let e,t,s,l;return t=new X({props:{icon:ze,class:"icon is-24",spin:!0}}),{c(){e=p("p"),z(t.$$.fragment),s=H(`
        Loading playlists ..`),this.h()},l(a){e=k(a,"P",{class:!0});var n=b(e);Q(t.$$.fragment,n),s=R(n,`
        Loading playlists ..`),n.forEach(f),this.h()},h(){c(e,"class","list-item")},m(a,n){I(a,e,n),G(t,e,null),d(e,s),l=!0},p:Y,i(a){l||(E(t.$$.fragment,a),l=!0)},o(a){T(t.$$.fragment,a),l=!1},d(a){a&&f(e),W(t)}}}function Ct(r){let e,t,s='<h1 class="title">Playlists</h1>',l,a,n,i,o,u,y,C,g,h,D;i=new X({props:{icon:lt,class:"icon"}}),u=new pt({props:{showCreatePlaylistModal:r[2]}});let _=r[0]&&Be(r);return{c(){e=p("div"),t=p("div"),t.innerHTML=s,l=O(),a=p("div"),n=p("a"),z(i.$$.fragment),o=O(),z(u.$$.fragment),y=O(),C=p("div"),_&&_.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var $=b(e);t=k($,"DIV",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-zt78cw"&&(t.innerHTML=s),l=S($),a=k($,"DIV",{class:!0});var w=b(a);n=k(w,"A",{href:!0,class:!0});var V=b(n);Q(i.$$.fragment,V),V.forEach(f),w.forEach(f),$.forEach(f),o=S(m),Q(u.$$.fragment,m),y=S(m),C=k(m,"DIV",{class:!0});var B=b(C);_&&_.l(B),B.forEach(f),this.h()},h(){c(t,"class","column"),c(n,"href",null),c(n,"class","button"),c(a,"class","column is-narrow"),c(e,"class","columns is-mobile"),c(C,"class","list is-hoverable")},m(m,$){I(m,e,$),d(e,t),d(e,l),d(e,a),d(a,n),G(i,n,null),I(m,o,$),G(u,m,$),I(m,y,$),I(m,C,$),_&&_.m(C,null),g=!0,h||(D=[q(n,"click",r[5]),Je(it.call(null,C)),q(C,"click_outside",r[8])],h=!0)},p(m,[$]){const w={};$&4&&(w.showCreatePlaylistModal=m[2]),u.$set(w),m[0]?_?(_.p(m,$),$&1&&E(_,1)):(_=Be(m),_.c(),E(_,1),_.m(C,null)):_&&(ce(),T(_,1,1,()=>{_=null}),ue())},i(m){g||(E(i.$$.fragment,m),E(u.$$.fragment,m),E(_),g=!0)},o(m){T(i.$$.fragment,m),T(u.$$.fragment,m),T(_),g=!1},d(m){m&&(f(e),f(o),f(y),f(C)),W(i),W(u,m),_&&_.d(),h=!1,be(D)}}}function Pt(r,e,t){let s;Re(r,ve,h=>t(3,s=h));let l,a,n=!1;Ke(async()=>{t(0,l=i())});const i=async()=>{Xe(ve,s=await Qe(),s)},o=h=>{a==h?t(1,a=null):t(1,a=h)};return[l,a,n,s,o,()=>t(2,n=!n),h=>o(h),h=>o(h),()=>t(1,a=null)]}class Mt extends je{constructor(e){super(),Fe(this,e,Pt,Ct,He,{})}}export{Mt as component};
